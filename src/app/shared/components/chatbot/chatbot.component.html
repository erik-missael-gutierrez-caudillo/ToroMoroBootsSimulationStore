<button class="open-chat" (click)="toggleChat('close-chat')"postcssrcpostcssrc>
	{{ isOpen === 'hidden' ? 'ğŸ’¬ Chat' : 'Ã— Cerrar' }}
</button>

<div class="chat-container" [class.hidden]="isOpen === 'hidden'">
	<div class="chat-header">
		<h3>Asistente Virtual</h3>
		<button class="close-chat" (click)="toggleChat('open-chat')">Ã—</button>
	</div>
	<div class="chat-messages" #scrollContainer>
			<div *ngFor="let message of messages" class="message" [class.user]="message.sender === 'user'" [class.bot]="message.sender === 'bot'">
					<p>{{ message.text }}</p>
						<div *ngIf="message.ticket" class="ticket">
								<h4>ğŸŸï¸ Tu CupÃ³n Exclusivo</h4>
								<p><strong>CÃ³digo:</strong> {{ message.ticket.codigo }}</p>
								<p><strong>Descuento:</strong> {{ message.ticket.descuento }}</p>
								<p><strong>VÃ¡lido para:</strong> {{ message.ticket.cliente }}</p>
								<p><em>{{ message.ticket.expira }}</em></p>
								<button class="btn">Copiar CÃ³digo</button>
						</div>
						<div *ngIf="message.mapUrl" class="map-container">
								<iframe [src]="message.mapUrl" width="100%" height="200" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
								<p class="map-link">  <a [href]="message.mapUrl" target="_blank">Ver en Google Maps</a></p>
								<p class="map-location">ğŸ“ Calle Elena 304, San Juan de Dios, LeÃ³n, Gto.</p>
						</div>
						<div  *ngIf="message.suggestions?.length" class="suggestions">
								<button *ngFor="let suggestion of message.suggestions" (click)="sendMessage(suggestion)">
										{{ suggestion }}
								</button>
								<button *ngIf="message.sender === 'bot'" (click)="sendMessage('inicio')">ğŸ  MenÃº Principal</button>
						</div>
						<div *ngIf="isLoading && message.sender === 'bot'" class="typing-indicator">
								<span></span>
								<span></span>
								<span></span>
						</div>
			</div>
	  	</div>
	<div class="chat-footer">
		<div class="chat-input">
				<input [(ngModel)]="inputMessage" (keyup.enter)="sendMessage()" placeholder="Escribe tu mensaje...">
				<button (click)="sendMessage()">Enviar</button>
		</div>
	</div>
</div>